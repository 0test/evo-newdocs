# CommerceDeliveryGoshippo
Плагин для интеграции магазина на базе Commerce из сервисом goshippo.com

## Установка
1. Установить зависимость ```shippo/shippo-php```
2. Получить токен, и прописать его в настройках плагина.
3. Добавить тв поля в товар для указания размеров и веса и заполнить их.

## Внимание ##
1. Убедитесь что плагин на каждое событие вызывается после Commerce.
2. Убедитесь что подключен jQuery.

## Возможности ##
* Добавляет новый способ доставки с полями для ввода адреса и выбора тарифа.
* Создает накладную в автоматическом или ручном режиме.
* На странице заказа выводит информацию об накладной.
* Позволяет через админку ввести адрес, выбрать тариф и создать накладную.

## Логика работы ##
1. После выбора способа доставки Goshippo показывает блок из полями для ввода адреса
2. После заполнения всех полей, нужных для получения тарифов обновляет форму и выводит список тарифов.   
   Механизм определения того, что адрес полный можно переопределить. На фронте перебив метод canRequestRates объекта goshippo.   
   На серверной стороне с помощью события OnCommerceDeliveryGoshippoAddressReceived
3. После оформления заказа, если стоит автоматическая генерация накладной генерирует накладную.

