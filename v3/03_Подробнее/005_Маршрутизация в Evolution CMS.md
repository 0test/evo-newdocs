# Маршрутизация в Evolution CMS #


1. [Маршруты по-умолчанию](#section1)
2. [Произвольные маршруты](#section2)

## Маршруты по-умолчанию <a name="section1"></a>  ##

По-умолчанию все маршруты к ресурсам на сайте задаются в админ-панели при создании ресурса.
За этот функционал отвечают настройки Evolution CMS (Системная конфигурация -> Дружественные URL).

![Конфигурация](/assets/images/s16.png)

Возможные настройки хорошо описаны в интерфейсе системы. В пояснениях нуждаются две директивы.

Каждый раз при сохранении ресурса сбрасывается кэш и перестраивается "дерево" сайта.
AliasListing отвечает за ускорение генерации адресов ресурсов. Эта настройка актуальна в основном для больших сайтов.  Для того, чтобы не генерировать его заново, используются настройки:

* **Выключить AliasListing для всех ресурсов** - выключит из кэша все ресурсы.

* **Использовать AliasListing только для Папок**  - только "папки". 

Для больших сайтов генерация может занимать продолжительное время. Рекомендуется её отключать.


Поле "псевдоним" задаётся при создании ресурса. Можно не заполнять это поле -  система сама сделает валидный адрес.

![Alias](/assets/images/s15.png)




## Произвольные маршруты  <a name="section2"></a>  ##

Вы можете задать маршруты и без создания ресурсов в "дереве" документов.
Это может пригодиться для обработки форм, вывода данных из своих таблиц и/или моделей.

### Роуты по-умолчанию ### 

В `core/custom/routes.php` пишем маршруты

```php
<?php
use EvolutionCMS\Main\Controllers\ArticleController;

Route::get('/articles', [ArticleController::class, 'index'] );
Route::get('/articles/{id}', [ArticleController::class, 'show'] );
```

### Роуты в своём пакете ### 

Создать файл `core/custom/packages/NAME/routes.php`:
```php
Route::get('test/{id}', [ArticleController::class, 'show']);
```
В сервис-провайдере вашего пакета загрузить их, задав middleware.

`core/custom/packages/Name/src/NameServiceProvider.php`
```php
Route::group(['middleware' => 'bindings'], function(){
    $this->loadRoutesFrom(__DIR__ . '/../routes.php');
});

```
Либо задать middleware сразу в файле routes.php

```php
Route::get('test/{id}', [ArticleController::class, 'show'])->middleware('bindings');
```