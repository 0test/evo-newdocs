# Переменные в шаблоне, они же TV-параметры #

1. [Для чего нужны TV-параметры](#section1)
2. [Пример параметра](#section2)
3. [Основные параметры](#section3)
4. [Пользовательские параметры](#section4)
5. [Создание и редактирование TV-параметра](#section5)
6. [Установка дополнительных параметров](#section6)

TV-параметр в Evolution CMS - элемент (поле), который содержит определенную информацию для текущей страницы.

TV-параметры позволяют добавить к документу дополнительную информацию, которую затем можно использовать наравне с основными параметрами. Они имеют различные типы и в зависимости от этого меняется их поведение и внешний вид. Значение параметра можно вывести на страницу или передать сниппету для дальнейшей обработки.

## Для чего нужны TV-параметры? <a name="section1"></a> ##

TV-параметры нужны для упорядоченного и логичного хранения информации на сайте. 

Представьте, что на сайте есть 2 типа материалов - товары и новости. Для товара можно создать параметры, в одном из которых будет храниться цена, а в другом фотография. А для новостей создать другие параметры - теги и сюжет.

Зачастую TV-параметры используются для создания SEO-полей наподобие meta description, keywords и т.д.

**Гибкость и простота**
Параметры привязываются к шаблонам, и это позволяет в зависимости от типа материала задавать абсолютно разные поля для контента.

## Пример параметра  <a name="section2"></a> ##
```
{{ $documentObject['pagetitle'] }}
```
Вызов параметра в шаблоне, который вернет заголовок страницы. 
```
<head>
<title>{{ $documentObject['pagetitle'] }}</title>
</head>
```
Содержимое параметра выводится в экранированном виде. Если вы хотите отдать html, то нужно писать так:
```
{!! $documentObject['content'] !!}
```
---
**Все параметры можно разделить на основные, системные и пользовательские.**

## Основные параметры: <a name="section3"></a>  ##

Список основных параметров заранее определен в Evolution CMS  и содержит основную информацию о документе. Большую часть из них можете увидеть при создании и редактировании любого документа.
 ### Список основных параметров заранее определен и содержит основную информацию о документе.


* `[*pagetitle*]` - заголовок документа 

* `[*longtitle*]` - расширенный заголовок документа

* `[*description*]` - описание документа

* `[*introtext*]` - аннотация документа 

* `[*content*]` - содержимое документа 

* `[*alias*]` - псевдоним документа

* `[*link_attributes*]` - атрибуты ссылки

* `[*id*]` - идентификатор (номер) документа

* `[*pub_date*]` - дата публикации дкоумента

* `[*unpub_date*]` - дата завершения публикации 

* `[*createdby*]` - Идентификатор пользователя создавшего документ 

* `[*createdon*]` - Дата создания документа 

* `[*editedby*]` - Идентификатор пользователя редактировавшего документ 

* `[*editedon*]` - Дата редактирования документа 

* `[*type*]` - вариант (документ, папка или ссылка) 

* `[*contentType*]` - тип содержимого (например, text/html) 

* `[*published*]` - опубликован ли документ (1|0) 

* `[*parent*]` - номер (ID) родительского документа

* `[*isfolder*]` - является ли документа папкой (1|0) 

* `[*richtext*]` - используется ли при редактировании документа визуальный редактор 

* `[*template*]` - номер (ID) используемого шаблона для документа 

* `[*menuindex*]` - порядковый номер отображения в меню 

* `[*searchable*]` - доступен ли документ для поиска (1|0) 

* `[*cacheable*]` - Кэшируется ли документ (1|0) 

* `[*deleted*]` - Документ удален (1|0) 

* `[*deletedon*]` - Возвращает дату удаления документа (в секундах с 1 января 1970 г.) 

* `[*deletedby*]` - Идентификатор пользователя удалившего документ 

* `[*menutitle*]` - Заголовок меню. Если не используется, то заголовок документа 

* `[*donthit*]` - Слежение за количеством посещений отключено (1|0) 

* `[*haskeywords*]` - Документ содержит ключевые слова (1|0) 

* `[*hasmetatags*]` - Документ имеет метатеги (1|0) 

* `[*privateweb*]` - Документ входит в частную группу пользовательских документов (1|0) 

* `[*privatemgr*]` - Документ входит в частную группу менеджерских документов (1|0) 

* `[*content_dispo*]` - Вариант выдачи содержимого (1 - для отображения | 0 - для скачивания) 

* `[*hidemenu*]` - Документ не отображается в меню (1|0) 

* `[*alias_visible*]` - Документ участвует в ЧПУ при использовании вложенных ЧПУ (1|0)


## Пользовательские TV-параметры <a name="section4"></a>  ##

Пользовательские параметры создаются программистом вручную, исходя из опыта и структуры сайта.

## Создание и редактирование TV-параметра <a name="section5"></a> ##

Для создания параметра необходимо нажать на ссылку "Элементы - Параметры (TV)" и выбрать "Новый параметр (TV)".

![ТВ-параметры](/assets/images/s5.png)

Переключитесь на вкладку "Шаблоны" и выберите из списка нужные шаблоны, где вы хотите видеть этот параметр.

![Задание шаблона](/assets/images/s6.png)

> Обратите внимание на список "Тип ввода". Вы можете выбрать, какой именно внешний вид и функционал будет у параметра. Текст, изображение, файл или чекбокс - отталкивайтесь от нужного вам функционала.

### Назначение полей

- **Имя параметра** - используется для вызова TV-параметра. Можно использовать английский язык, дефис и знак подчеркивания.
- **Заголовок** - используется для названия TV-параметра в документе при редактировании.
- **Описание** - используется для более расширенной информации о параметре в документе при редактировании, а также в общем списке TV-параметров.
- **Тип ввода** - определяет вид получаемой информации. В зависимости от выбранного типа интерфейс меняется. Более подробно смотрите "Типы ввода".
- **Значение по умолчанию** - определеяет значение TV-параметра по умолчанию при редактировании документа.
- **Возможные значения** - используются в некоторых типах ввода (например Radio Options, Check Box) для предоставления вариантов выбора. Более подробно смотрите Определение значений TV-параметра.
- **Визуальный компонент** - определяет вариант вывода TV-параметра на страницу сайта. Более подробно смотрите Вид TV-параметра.
- **Порядок в списке** - определяет порядок TV-параметра в документе.
- **"Замок" в имени параметра** - если включить флажок, то никто, кроме администраторов не сможет редактировать этот TV-параметр.

### Типы ввода ###

- **Text** - поле ввода.
Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании.


- **Textarea и Textarea (Mini)** - текстовое поле. Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании.

- **RichText** - поле с визуальным редактором.
Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании.

- **DropDown List Menu** - раскрывающийся список.
Поле "Возможные значения" задает список значений и определеляется специальным форматом. Более подробно смотрите Определение значений TV-параметра. Значение по-умолчанию определяет выбранный пункт при первом редактировании.

- **Listbox (Single-Select) и Listbox (Multi-Select)** - список множественного выбора.
Single-Select и Multi-Select отличаются только тем, что в первом варианте можно выбрать одно значение, а во втором несколько (с использование Ctrl).
Поле "Возможные значения" задает конечный список значений и определеляется специальным форматом. Более подробно смотрите Определение значений TV-параметра. Значение по умолчанию определяет выбранный пункт при первом редактировании.

- **Radio Options** - переключатели.
Поле Возможные значения задает конечный список значений и определеляется специальным форматом. Более подробно смотрите Определение значений TV-параметра. Значение по умолчанию определяет выбранный пункт при первом редактировании.

- **Check Box** - флажки.
Поле Возможные значения задает конечный список значений и определеляется специальным форматом. Более подробно смотрите Определение значений TV-параметра. Значение по умолчанию определяет выбранный пункт при первом редактировании.

- **Image** - изображение.
При нажатии кнопки "Вставить" открывается файловый менеджер, который позволяет выбрать необходимое изображение и загрузить его.
Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании. 

- **File** - файл.
При нажатии кнопки "Вставить" открывается файловый менеджер, который позволяет выбрать необходимый файл и загрузить его.
Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании.

- **URL** - ссылка.
Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании.

- **Email** - электронная почта.
Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании.

- **Number** - число.
Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании.

- **Date** - дата.
Первая кнопка вызывает календарик, с помощью которого можно выбрать дату. Вторая кнопка стирает дату.
Возможные значения не используются. Значение по умолчанию автоматически записывается в поле при первом редактировании.

### Определение значений TV-параметра ###

Настройкой "Возможные значения" определяются варианты для таких параметров как DropDown List Menu, Listbox,Check Box и Radio Options.

Формат определения значений следующий:
```
параметр1==значение1||параметр2==значение2||параметр3==значение3
```
Разделитель "==" используется для разделения отображаемого и фактического значения, а разделитель "||" разделяет значения между собой.

Если фактические и отображаемые значения совпадают, то можно использовать упрощенный вариант записи:
```
значение1||значение2||значение3
```
### Пример ###

Тип ввода: DropDown List Menu
Возможные значения:
```
Красный==#FF0000||Зеленый==#00FF00||Синий==#0000FF
```

Когда пользователь будет редактировать документ, то увидит выпадающий список со значениями "Красный, Зеленый, Синий". При выборе значения и сохранения документа в базу сохранится одно из значений - #FF0000, #00FF00 или #0000FF.


## Установка дополнительных параметров <a name="section6"></a> ##

Существует несколько дополнений, которые реализуют различный функционал для тех случаев, когда не хватает стандартных типов ТВ-параметров.

### MultiTV ###
Расширяет функционал ТВ-параметров, позволяя создавать внутри параметра дополнительные поля различных типов или даже таблицы.

### multiFields ###
Более современный и сложный аналог multiTV.

### Selector ###
Список для быстрого поиска и выбор нужного ресурса/ресурсов из нужного контейнера. Используется для тегов и прочего связывания ресурсов между собой.