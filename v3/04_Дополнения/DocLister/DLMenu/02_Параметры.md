Основные параметры

Основные параметры cниппета DLMenu для вывода меню с помощью DocLister.

Содержание:

- [Основные параметры](#params)
- [Кэширование](#cache)
- [Шаблоны](#templates)
- [Классы](#classes)
- [Плейсходеры](#placeholders)

## <a name="params"></a> Основные параметры

Для сортировки и ограничения выборки следует использовать параметры DocLister (`sortBy, sortDir, orderBy, addWhereList` и т.д.) По умолчанию выполняется сортировка по возрастанию значения поля menuindex, документы с `hidemenu=1` не выводятся.

Для того чтоб выводились документы, в которых параметр "Отображать в меню", неактивен, нужно добавить в вызов снипепта параметр `addWhereList` с пустым значением (`&addWhereList=''`).

Параметр `prepare` нельзя задать для определенного уровня (например, prepare2). Но в самом prepare-сниппете узнать уровень можно из значения `$data['level']`. Параметр `tvList` также применяется ко всем уровням.

В параметрах шаблонов следует указывать уровень на 1 меньше (например, `rowTpl2` будет применен к документам третьего уровня, а `rowTpl0` - первого).

| параметр                              | описание                          | умолч.  |
| ------------------------------------- | --------------------------------- | ------- |
| [documents](#param_documents)         | Список документов                 |         |
| [parents](#param_parents)             | Список родителей                  |         |
| [maxDepth](#param_maxdepth)           | Максимально уровней меню          |         |
| [showParent](#param_showparent)       | Показывать родительские документы | `0`     |
| [api](#param_api)                     | Результат как json                | `0`     |
| [hideSubMenus](#param_hidesubmenus)   | Скрывать неактивные ветки         | `0`     |
| [openIds](#param_openids)             | Показывать всегда                 |         |
| [countChildren](#param_countchildren) | Показывать количество внутри      | `0`     |
| [titleField](#param_titlefield)       | Плейсхолдер с названием           | `title` |
| [joinMenus](#param_joinmenus)         | Склеивать меню                    | `0`     |

### <a name="param_documents"></a> documents

Список `id` документов, которые образуют одноуровневое меню. Чтобы вывести в том порядке, в котором они перечислены, следует использовать параметр `sortType1` со значением `doclist`.

### <a name="param_parents"></a> parents

Список `id` документов, от которых строится многоуровневое меню, через запятую. Если у указанных документов разные родители, то будет построено несколько меню. Чтобы вывести в том порядке, в котором перечислены родители, следует использовать параметр `sortType1` со значением `doclist`.

_Значения:_ список id через запятую.

_По умолчанию:_ id ресурса, в котором вызван сниппет.

### <a name="param_maxdepth"></a> maxDepth

Максимальное количество уровней в меню.

_Значения:_ целое число больше 0.

_По умолчанию:_ `10`.

### <a name="param_maxparent"></a> showParent

Если значение параметра равно 1, то будут показаны документы, указанные в параметре parents.

_Значения:_ `0`, `1`.

_По умолчанию:_ `0`.

### <a name="param_api"></a> api

Если значение параметра равно 1, то результаты будут выведены в виде json-массива.

_Значения:_ `0`, `1`.

_По умолчанию:_ `0`.

### <a name="param_hidesubmenus"></a> hideSubMenus

Если значение параметра равно 1, то неактивные ветки меню не показываются.

_Значения:_ `0`, `1`.

_По умолчанию:_ `0`.

### <a name="param_openids"></a> openIds

Результат аналогичен вызову с включенным параметром `hideSubMenus`, но можно указать через запятую id родительских документов, чьи непосредственные потомки будут всегда видны.

_Значения:_ список id через запятую.

_По умолчанию:_ нет значения.

### <a name="param_countchildren"></a> countChildren

Если значение параметра равно 1, то будет вычислено количество непосредственных дочерних документов для каждого ресурса в меню.

_Значения:_ `0`, `1`.

_По умолчанию:_ `0`.

### <a name="param_titlefield"></a> titleField

Имя плейсхолдера, в котором задается название документа.

_По умолчанию:_ `title`.

### <a name="param_joinmenus"></a> joinMenus

Если задано несколько родителей и отключен параметр showParent, то сниппет выведет столько же меню. С помощью этого параметра их можно объединить в одно.

_Значения:_ `0`, `1`.

_По умолчанию:_ `0`.

## <a name="cache"></a> Кэширование

При включенном кэшировании запросы в БД для построения меню выполняются только один раз, готовое меню также кэшируется, но только для активных пунктов меню (то есть общее количество соответствующих записей в кэше будет равно количеству пунктов меню плюс одна запись для меню с неактивными пунктами, независимо от количества страниц сайта, на которых это меню выводится).

> При использовании компонента EvoTwig возможно использовать кэш для ускорения работы DLMenu.

| параметр                                      | описание                      | умолч. |
| --------------------------------------------- | ----------------------------- | ------ |
| [cache](#param_cache)                         | Включить кэширование          | `0`    |
| [cacheLifetime](#param_cachelifetime)         | Время жизни кеша              | `0`    |
| [cacheStrategy](#param_cachestrategy)         | Режим кеширования             |        |
| [cacheKeyGenerator](#param_cachekeygenerator) | Правила построения ключа кеша |        |

### <a name="param_cache"></a> cache

Включает кэширование.

_Значения:_ `0`, `1`.

_По умолчанию:_ `1`.

### <a name="param_cachelifetime"></a> cacheLifetime

Позволяет кэшировать данные на заданное время. Если значение равно 0, то данные кэшируются до тех пор, пока кэш не будет очищен.

_Значения:_ количество секунд.

_По умолчанию:_ `0`.

### <a name="param_cachestrategy"></a> cacheStrategy

Определяет режим кэширования.

При значении user записи в кэше создается два набора записей: для авторизованных и неавторизованных пользователей; при usergroup также учитываются группы, в которых состоит пользователь.

_Значения:_ `user`, `usergroup`.

_По умолчанию:_ нет значения.

### <a name="param_cachekeygenerator"></a> cacheKeyGenerator

Позволяет указать функцию или статический метод для построения ключа кэша. При вызове используются аргументы modx (объект DocumentParser) и DocLister (объект контроллера).

По умолчанию для построения ключа использует хэш параметров, с которыми был вызван сниппет.

_Значения:_ функция, статический метод.

_По умолчанию:_ нет значения.
