# SimpleFiles

**Важно!** Для работы необходимо наличие `DocLister` и `MODxAPI`.

SimpleFiles - прикрепляем к странице файлы Evolution CMS.

Еще одно дополнение на базе `DocLister` и `EasyUI`. На этот раз к странице прикрепляются файлы и редактируются в таблице – как в `MultiFiles`, но немного удобнее (особенно если речь идет о большом количестве файлов).

Автор: [Pathologic](https://github.com/Pathologic/SimpleFiles)

## Настройки плагина

| параметр          | описание                                                                                                                 |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------ |
| Tab name          | название вкладки                                                                                                         |
| Controller class  | класс контроллера отличный от стандартного                                                                               |
| Templates         | id шаблонов, с которыми работает плагин, **обязательно**                                                                 |
| Documents         | то же самое, но для отдельных ресурсов                                                                                   |
| Ignore Documents  | id исключаемых ресурсов                                                                                                  |
| Roles             | id разрешенных ролей                                                                                                     |
| Storage folder    | папка, где хранятся файлы, по умолчанию assets/storage/                                                                  |
| Icons folder      | папка, в которой хранятся иконки файлов, по умолчанию assets/snippets/simplefiles/icons/                                 |
| Allowed files     | расширения файлов, разрешенных для загрузки, через запятую; если не указывать, то будет использована системная настройка |
| Maximum file size | ограничение размера файла, в мегабайтах                                                                                  |

Иконки должны именоваться как `расширение_файла_строчными_буквами.png`, иконка `file.png` подставляется, если не нашлось подходящей.

## Вывод записей

По выводу записей читаем про [SimpleGallery](../SimpleFiles/index.md).

При выводе через сниппеты-обертки `sfLister` и `sfController` доступны дополнительно виртуальные плейсхолдеры:

| плейсхолдер            | описание                                 |
| ---------------------- | ---------------------------------------- |
| `[+icon+]`             | иконка                                   |
| `[+fSize+]`            | отформатированное значение размера       |
| `[+mime+]`             | MIME-тип файла                           |
| `[+ext+]`              | расширение файла                         |
| `[+filename+]`         | имя файла без расширения                 |
| `[+basename+]`         | имя файла с расширением                  |
| `[+e.sf_title+]`       | название файла с экранированием символов |
| `[+e.sf_description+]` | описание файла с экранированием символов |

## Поля в таблице sf_files

| поле             | описание                                             |
| ---------------- | ---------------------------------------------------- |
| `sf_id`          | id файла, `idField`                                  |
| `sf_index`       | позиция в списке                                     |
| `sf_title`       | название файла                                       |
| `sf_description` | описание файла                                       |
| `sf_file`        | ссылка на файл                                       |
| `sf_size`        | размер файла                                         |
| `sf_isactive`    | флажок, чтобы скрыть какие-то файлы из вывода        |
| `sf_rid`         | id ресурса, которому принадлежит файл, `parentField` |
| `sf_createdon`   | дата добавления файла                                |
