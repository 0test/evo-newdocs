##Генерация превью при загрузке

Реализуется с помощью [системы плагинов](http://modx.im/blog/docs/3006.html). В общих чертах, плагин должен обрабатывать событие при загрузке картинки, при удалении картинки и при обновлении картинки. Это позволяет избавиться от использования сниппета phpthumb при выводе изображений, что ускоряет вывод и не засоряет кэш.

В комплекте для примера присутствует плагин sgThumb. Для его работы нужно отметить события OnFileBrowserUpload, OnSimpleGalleryDelete и OnSimpleGalleryRefresh, затем создать настройку 
```
&tconfig=Thumbnails Configuration;textarea;
```

и добавить в нее список описаний превью в формате json:
```
[
{"template":3,"options":"w=320&h=200&zc=1","folder":"thumb"},
{"template":6,"options":"w=384&h=384&far=C&bg=000000","folder":"384x384"},
{"rid":9,"options":"w=500&h=500&zc=C&bg=000000","folder":"500x500"},
{"template":6,"options":"w=500&h=500&zc=C&bg=000000","folder":"500x500"}
]
```

Каждое правило описывается массивом:
```
{"template":id_шаблона,"options":"параметры_phpthumb","folder":"имя_папки"}
```
или:
```
{"rid":id_документа,"options":"параметры_phpthumb","folder":"имя_папки"}
```

В примере будет создаваться картинка 320x320 для шаблона 3, картинка 500х500 для документа 9 и две картинки для шаблона 6: 384x384 и 500x500.

При выводе нужно использовать сниппет, который получает адрес картинки в параметре input и какое-то значение для получения ссылки на превью (для сниппета sgThumb это имя папки из настроек плагина sgThumb) - в параметре options. Вернуть сниппет должен ссылку на превью.