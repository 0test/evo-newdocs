# Работа с blade-шаблонами в Evolution CMS #

1. [Введение](#section1)
2. [Базовый шаблон](#section2)
3. [Дочерние шаблоны](#section3)
4. [Директивы](#section4)




## Введение  <a name="section1"></a> ##

Стандартный шаблонизатор в Evolution CMS это **Blade** - движок шаблонов, входящий в состав Laravel.

Blade прекрасно документирован, и большая часть директив из официальной документации Laravel работает и в Evolution CMS

Ссылки на сторонние ресурсы:
* [На английском](https://laravel.com/docs/9.x/blade)
* [На русском](https://laravel.su/docs/8.x/blade)

Файлы шаблонов Blade используют расширение файла .blade.php и обычно хранятся в каталоге `/views` в корневой директории сайта.


## Базовый шаблон <a name="section2"></a> ##

После создания шаблонов в админ-панели папка `views` имеет примерно следующий вид:

![blade шаблоны](/assets/images/s9.png)

У нас созданы файлы .blade.php для каждого из шаблонов. Если это не так, вы можете вручную создать файлы, определив в админ-панели, какой псевдоним к какому шаблону относится.

**Изучите макет сайта**

Большинство сайтов имеют общий макет на всех страницах. Этот макет отличается только различным содержимым в контенте, сайдбаре и других похожих секциях.

Чтобы не создавать множество похожих шаблонов, удобно определить этот макет как единый шаблон Blade, от которого в дальнейшем мы будем наследовать другие шаблоны.

Создайте папку `layout` и в ней файл `app.blade.php` со следующим содержимым:
```html
<html>
<head>
    <title>@yield('title')</title>
</head>
<body>
    @section('sidebar')
    @show
    <main class="container">
        @yield('content')
    </main>
</body>
</html>
```

### Yield  и Section ###

Обратите внимание на директивы `@section` и `@yield`. 

Директива `@section` определяет секцию содержимого. Шаблоны, расширяющие макет, могут добавлять содержимое в секции макета с помощью директив `@section`. В нашем примере директива определяет, что в этом месте может быть определена секция сайдбара.
> Если директива не определена в дочернем шаблоне, то будет использовано значение по-умолчанию, которое у нас пустое.

Директива `@yield` используется для отображения содержимого секции, которое будет задано дочерним шаблоном. 

>Ближайшая аналогия `@yield` -- это вывод переменной, значение которой мы зададим для каждого дочернего шаблона.

## Дочерние шаблоны <a name="section3"></a> ##

Мы сделали основной макет для сайта, давайте сделаем дочерний шаблон, который наследует этот макет.

Возьмём шаблон `mainpage.blade.php`

```html
@extends('layout.app')
@section('title', 'Главная страница')
@section('sidebar')
	<aside>
		<p>Сайдбар для главной</p>
	</aside>
@endsection
@section('content')
	<p>Контент</p>
@endsection
```

### Extends   ###

Мы использовали используйте директиву Blade `@extends`, чтобы указать, какой макет этот шаблон должен наследовать. В нашем случае это `layout/app.blade.php` - наш базовый шаблон.

>Точка означает, что файл app лежит в папке layout. А .blade.php можно не дописывать.

Директивы `@section` задают содержимое для секций, которые заданы в родительском шаблоне с помощью `@yield`.

Обратите внимание на два способа написания директивы:
```html
@section('title', 'Главная страница')
```
и
```html
@section('content')
 <!-- any html -->
@endsection 
```
Какой выбирать - вопрос исключительно вашего удобства и количества содержимого.

Разумеется, мы можем и не задавать какую-то `@section`. Скажем, если для других страниц нам нужно будет скрыть сайдбар, то достаточно будет убрать его `section`:

```html
@extends('layout.app')
@section('title', 'Не главная страница')

@section('content')
	<p>Контент страниц без сайдбара</p>
@endsection
```

### include ###

Если вы хотите **всегда** включать в шаблон какой-то блок, воспользуйтесь  директивой `@include`.

Допустим, на сайте всегда одинаковый футер. Создайте файл `footer.blade.php` в папке `parts`:

```html
<footer>
	Нижняя часть сайта
</footer>
```

Подключите его в файле `layouts/app.blade.php`:
```html
@include('parts.footer')
```
Теперь содержимое файла `parts/footer.blade.php` будет всегда отображаться на всех страницах, наследующих `app.blade.php`.


## Директивы <a name="section4"></a> ##

Помимо наследования шаблонов и отображения данных, Blade содержит псевдонимы для условных операторов и циклов.

Эти директивы схожи со своими аналогами в PHP.


Оператор If
```
@if (count($records) === 1)
    Раз
@elseif (count($records) > 1)
    Много
@else
   Пусто
@endif
```

Оператор isset
```
@isset($records)
    // Переменная $records определена и не равна `null` ...
@endisset

@empty($records)
    // Переменная $records считается «пустой» ...
@endempty
```

---

Этот материал базируется на большом гайде по шаблонизации Blade в Evolution CMS. 

Если вам нужны дополнительные сведения, [прочитайте](/v3/03_%D0%9F%D0%BE%D0%B4%D1%80%D0%BE%D0%B1%D0%BD%D0%B5%D0%B5/01_%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%20%D0%B2%20Evolution%20CMS.md) его.